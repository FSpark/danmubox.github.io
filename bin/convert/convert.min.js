$(function(){"use strict";$("#main-form");var i=$("#txt-video-width"),l=$("#txt-video-height"),r=$("#slt-font"),c=$("#ckb-font-bold"),v=$("#rge-font-scale"),p=$("#rge-font-opacity"),s=$("#rge-range-scale"),d=$("#rge-roll-stay"),f=$("#rge-fixed-stay"),u=$("#font-example"),b=new DanMuTable("#table","#file-input","#btn-remove","#btn-clear","#btn-convert","#modal-drag","#main-form",function(){var t=$('input:radio[name="outPutType"]:checked').val(),e=b.$table.bootstrapTable("getData"),a=new ConvertOption(parseInt(i.val()),parseInt(l.val()),r.find(":selected").text(),c.is(":checked"),v.val()/100,p.val()/100,s.val()/100,parseInt(d.val()),parseInt(f.val()),t);Common.writeCookie(ENUM_COOKIE_PATH.CONVERT,a);var n=b.updateData.bind(b),o=b.executeComplate.bind(b);DanMuConvert.convert(e,a,n,o)});function n(){var t=r.find(":selected").text(),e=v.val(),a=p.val(),n=c.is(":checked")?"bold":"normal",o=parseInt(ConvertOption.defaultFontSize*(e/100));u.css("font-family",t),u.css("font-size",o+"pt"),u.css("opacity",a/100),u.css("font-weight",n)}function t(t,e){var a=t.parent().find("d");t.bind("input propertychange",function(){a.text(t.val()),e&&n()})}r.change(function(){n()}),c.change(function(){n()}),t(v,!0),t(p,!0),t(s,!1),t(d,!1),t(f,!1),$("#input").on("shown.bs.collapse",function(t){b.$table.bootstrapTable("resetView")});for(var e=0;e<fontDatas.length;e++){var a=fontDatas[e];r.append('<option text="'+a+'">'+a+"</option>")}Common.cookieIfPresent(ENUM_COOKIE_PATH.CONVERT,function(t){i.val(t.videoWidth),l.val(t.videoHeight),r.find("option[text='"+t.fontFamily+"']").attr("selected",!0),c.attr("checked",t.bold),v.val(100*t.fontScale),p.val(100*t.alpha),s.val(100*t.rangeScale),d.val(t.rollStayTime),f.val(t.fixedStayTime),$([v[0],p[0],s[0],d[0],f[0]]).trigger("input"),$("input:radio[name=outPutType][value="+t.outputType+"]").attr("checked",!0)}),n()});